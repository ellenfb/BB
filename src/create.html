<!DOCTYPE html>
<html lang="en" dir="ltr">

	<head>
		<meta charset="utf-8">
		<title>Bracket Creation</title>
	</head>
  
	<body>
		<div class="container-fluid" style="margin-top:5%;">
		<div class="col-sm-3"></div>
		<div class="col-sm-6 form-white">

        <fieldset>
        <legend >Create a Bracket</legend>
		<div class="form-group">
		
            <label for="brkName">Bracket Name</label>
            <input type="text" class="form-control" id="brkName" placeholder="New Bracket" required><br/>

            <label for="brkDesc">Bracket Description</label>
            <input type="text" class="form-control" id="brkDesc" placeholder="Description"><br/>

            <label for="brkSize">Bracket Size</label>
            <select class="form-control" id="brkSize">
				<option value="brk4">Four</option>
				<option value="brk8">Eight</option>
				<option value="brk16">Sixteen</option>
				<option value="brk32">Thirty-Two</option>
            </select><br/>

            <label for="seeded">Seeded</label>
            <select class="form-control" id="seeded">
				<option value="seedYes">Yes</option>
				<option value="seedNo">No</option>
            </select><br/>
			
			<br>
			<label for="entrants">Input bracket entrants with a comma separating each one:</label>
			<br>
			<textarea id="entrants" name="entrants" cols="20" rows="4"></textarea><br/>
			
            <input type="button" class="btn btn-danger" onclick="location.href='index.html';" value="Back" />
            <button type="button" onclick="CreateBracket()" class="btn btn-primary">Create</button>

          </div>
        </fieldset>
        </form>
        </div>
        <div class="col-sm-3"></div>
        </div>
    </body>
	
    <script type="text/javascript">
	
	const electron = require('electron');
	const fs = require('fs');

        function CreateBracket() {
            
			//create a file using the name of the bracket
			var path = "user_brackets/";
			var bracketName = brkName.value;
			var ext = ".txt";
			var fileName = path.concat(bracketName, ext);
			
			//write the user's bracket participants into a file
			fs.writeFile(fileName, entrants.value, (error) => { 
				if (error) throw err; 
			}) 
			
			//size 4
			if(brkSize.value === "brk4"){
				location.href="images/bracket4.svg";
			}
			
			//size 8
			else if(brkSize.value === "brk8"){
				location.href="images/bracket8.svg";
			}
			
			//size 16
			else if(brkSize.value === "brk16"){
				location.href="images/bracket16.svg";
			}
			
			//size 32
			else if(brkSize.value === "brk32"){
				location.href="images/bracket32.svg";
			}
			
			//error
			else{
				alert("Shouldn't be seeing this.")
			}
			
        }
  
    </script>
</html>
